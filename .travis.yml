language: php
php:
- '5.6'
- '7.0'
install:
- composer install
services:
- mysql
dist: trusty
sudo: required
addons:
  apt:
    packages:
    - mysql-server-5.6
    - mysql-client-core-5.6
    - mysql-client-5.6
before_script:
- sudo apt-get install apache2 libapache2-mod-fastcgi
- sudo service apache2 restart
- mysql -uroot -e "create database IF NOT EXISTS joomla;"
- mysql -uroot joomla < libraries/zoolanders/vendor/zoolanders/framework-test-env/db/joomla.sql
script:
- nvm install node
- npm install
- composer install
- npm run build
after_success:
    "curl -T dist/*.zip -u $FTP_USER:$FTP_PASSWORD ftp://www.zoolanders.com/framework/"
  file: "dist/*.zip"
notifications:
  email: false
branches:
  only:
  - master
  - develop
env:
  global:
    - secure: aumWyo+Yt1S/FjRbyNg4LwEDLpp7SaBMf2S9bjclvZPB45mSJ602Em8T6If8hJk447mBILyxtu8nSyKdmpkLawj4rOgyf2Iplvd4LPmWAeacFogZFkVhwaTihwx6kbmpSruICEQtXYOZeNJjwP6O0+HQoRwxu906otAz++ABRP4vfyMrj6ILXqffWi16AyuLvmYH8r0lEoVXDEMjD9kGupMBnxUMls1uBSiG1g2xInsbNHODsgoL7/qGgI+2AjuN2vfENOeSnAjZBFcNwAgVTONBZk7qnu/2vc2ELJ9biiM+906sKIP/c7UrrFmxiDZYNloOdPTUMl+hX5KGxryc95uo7K+MvSoYFot3FJFmuHVm3Uvec7y48gQw+ka99ezCIdvysvQiGigdtWzAOq+1fL7F8LFEVejb+nbfYiWUhta7zv/gcnFrEaWlnH0L/6PJKiMDxgZQlTslZ31t/ImxwITHv+pAoLz2AnoCWEGUl3OiZlNYWDoRU53wFBJNyBpMkWhd8roBUnA975W1Cw5MVuEfuoW1zyU4erxkuVu1IJvjWCVkYcbuyohNo4pvlDoC/9LeznuJs2ZgFt6yjdFdHYH/bzYCYjllWO7Tg66ajSPV/QL7KAteUd+VocBGoUnQfMoXs+gTjaO5t6Zhx9hMUEr3FlVFxSaKf2Wf/MQsEVc=
    - secure: mTeqNYaMB7OGuDlix/w9eLf+rR46MRcr3Pm2EcN9kZmKRKsZm/iSz0Dy4N4yAfdqC+w8w0PND/F+mS45G6sUMvsgt7Rf8UPLPgTO7IRr/4Xn+iGTqkJiN5d8UaAdRrk27srm/DNl8gVZ3Yw1Pq1+77lQZ3GlLOddp/c4HxG6ZfC51rucx8AkdmTldmOQD+P6rB9cZbTZUssghh0sWAnLIjHwxWM0PksjzcloDOROVj6/He2mCffMrzEqQg0SOOQxwVZdo/ZW+lLuQ3+8i0dMk/D6qq8vY4WqKnlbWv0mdqE6WDk4xA641NF3UVKg8SG4jrySE1P6GvnTlG/edAz3ENQ4E60WoaBRnmd9n3JLhn+Ynj/AmVd6VUxj238xBDo5Ou4pNl3pjS2Fhjw3kgYyo+ljrsYQdG/mNW1qhw8zIbABEV3uMRtbdCxRjtF6xyFvM+NhHOVpXZRhMsYddRPdZXLIDNsTm8/uXDK7tQ20tTaZaUzVdNMC2Q71nZhKUAnc6Dwhn5oaZ+956po8QNOIGZmMrMaU5x1H3+oKAt0OBPKl99EXtfimPybF8rXiPw0XthQFY04Y41f0mUmEvBSJPYWi6Zlr5GEFP+3P277D1blKmBb/nl6vrdxLJy9UyiKx9WNX/h6Y8AusMI4uu4RPy65CKuqEvKnP3b2lSSAQeP0=
